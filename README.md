# 나혼자 Ref

## 코드잇 스프린트 1기 초급 프로젝트 Ref.ver

### 📖 Github
## https://github.com/codeit-sprint-part2-team10/sb01-hrbank-team10

### 팀프로젝트가 끝나고 팀원들과 의논했던 기술적으로 아쉬웠던 점

1. 페이징 에러
2. 퇴사자 부서 처리
3. N + 1 문제
4. 백업 IP 검색
5. 최적화

---


## ✅ QueryDSL로의 전환

### 변경 사항 : 부서, 직원, 백업, 이력, COUNT 동적 쿼리를 QeuryDSL로 변경

### 기존의 문제점

기존 동적 쿼리는 JPA Criteria API의 Specification을 사용하여 구현되어 있었으나, 복잡하고 직관적이지 않아 코드 가독성과 유지보수성이 떨어짐

직원 목록 조회 시 무한 스크롤 버그가 지속적으로 발생하였으며, 원인 파악과 문제 해결이 어려웠음

백업 IP 검색 시 작업자의 IP가 정상적으로 검색되지 않는 문제가 있었음

### 해결 방법 및 결과

동적 쿼리를 QueryDSL로 변경하여 복잡한 조건의 동적 쿼리 처리를 간소화하고, 향후 기능 확장 가능성을 높임

QueryDSL로 변경하는 과정에서 기존에 발생했던 무한 스크롤 버그와 IP 검색 문제가 자연스럽게 해결

---

## ✅ N+1 문제와 Fetch Join 최적화

### 기존의 문제점

직원 정보 조회 시 직원마다 추가적인 부서 조회 쿼리(N+1 문제)가 발생하여 성능 저하가 있었음

프로젝트 후반부에 Fetch Join을 통한 최적화를 시도하려 했으나, 다른 심각한 버그 수정으로 인해 우선순위가 밀려 기간 내 해결하지 못함

### 해결 방법 및 결과

QueryDSL 리팩토링 과정에서 Fetch Join을 적용하여 N+1 문제를 해결

쿼리 최적화를 통해 불필요한 추가 쿼리를 제거하였으며, 성능 개선

비교적 간단한 작업이었으나 프로젝트 당시에는 우선순위 문제로 처리가 늦어진 점이 아쉬움으로 남음

---

## ✅ 퇴사자 처리 시 발생한 문제점

### 문제 1: 퇴사자 부서 정보 처리

퇴사 처리 시 직원의 부서를 null로 처리하는 과정에서, 프론트엔드에서 직원 수정 시 부서 정보가 보이지 않는 문제가 발생

백엔드 데이터는 이상이 없었으나, 프론트엔드에서 null을 처리하지 못하는 구조적 문제가 있었음

### 해결 방법 및 판단

본 프로젝트의 목적은 백엔드 개선이었으며, 프론트엔드의 구조적 문제까지 수정하는 것은 목표가 아니었기에, 백엔드 로직만으로 문제를 처리하고 추가적인 프론트엔드 수정은 진행하지 않음

부서 null 처리는 정상적으로 이루어졌으며, 프로젝트의 목적상 큰 오류가 아니라 판단하고 더 이상의 수정을 진행하지 않았음

### 문제 2: 직원 수 집계 오류

직원 퇴사 처리 후, 총 직원 수가 퇴사자 수만큼 줄어들지 않는 문제가 있었음

퇴사한 직원이 총 직원 수 및 분포 통계에 포함되는 현상이 발생

### 해결 방법

퇴사자 제외 로직을 명확히 추가하여 현재 직원 수 및 직원 분포 통계가 정확히 계산되도록 수정

### 문제 3: 직원 분포 퍼센티지 오류

직원 퇴사 시, 부서 및 직원 분포 퍼센티지 계산에 퇴사자가 포함되어 정확한 통계 산출이 되지 않았음

### 해결 방법

직원 분포 퍼센티지 계산 로직을 수정하여 퇴사자를 명확히 제외하도록 변경

---

## 🎯 결론 및 회고

이번 리팩토링 과정에서 QueryDSL 도입과 N+1 문제 해결을 통해 유지보수성을 향상시켰습니다. 

퇴사자 처리 관련 이슈 역시 명확한 로직 정리를 통해 구조적 안정성을 높였습니다. 

프로그래밍 팀프로젝트는 처음이라 아는게 많이 없고 코드 짜는게 미숙하여 많은 어려움을 겪었지만, 팀원들의 도움과 검색을 통해 배우다보니 빠르게 배운 것 같습니다. 다만 아쉬웠던 것은 일정상 시간이 부족하여 구현에 급급해 놓쳤던 것들이 많았습니다. 이에 아쉬운점을 개선하고자 리펙터링을 진행하며 다양한 개선을 시도했습니다.

아쉬운 부분이 아직 남아있긴 하지만, 팀워크적으로나 기술적으로 많이 배울 수 있었습니다. 기술적으로 해결하고 싶었던 문제들은 해결했으나, 개인적으로 추가하고 싶은 기능이나 코드 최적화는 추후 반영할 예정입니다.





