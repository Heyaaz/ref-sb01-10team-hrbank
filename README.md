# 나혼자 Ref

## 코드잇 스프린트 1기 초급 프로젝트 Ref.ver

### 📖 Github
## https://github.com/codeit-sprint-part2-team10/sb01-hrbank-team10

### 팀프로젝트가 끝나고 팀원들과 의논했던 기술적으로 아쉬웠던 점

1. 페이징 에러
2. 퇴사자 부서 처리
3. N + 1 문제
4. 백업 IP 검색
5. 최적화

---


### ✅ QueryDSL

기존 동적 쿼리(Criteria API의 Specification) → QueryDSL로 변경

- 기존의 Specification을 이용한 코드는 복잡하고 직관적이지가 않아 가독성과 유지보수성 측면에서 QueryDSL로 변경
- QeuryDSL은 Criteria, Specification보다 복잡한 조건의 동적 쿼리 처리가 용이하기에 추후에 기능을 더 확장할 가능성을 두어 변경

기존 문제점 1 : 직원 목록에서 무한 스크롤 버그가 발생

기존 JPA Criteria API와 Specifiacion을 이용한 동적 쿼리 구현은 개인적으로 이해도가 없고 다루지 않았었기에 어디서 문제가 발생했고, 왜 이런 오류가 났는지 몰라 고치기 난감했으나 QueryDSL로 교체하는 과정에서 기존 문제들이 해결

기존 문제점 2 : 백업 부분 작업자에서 IP 검색이 안되는 문제 

### ✅ N + 1

직원 조회시 직원마다 직원 정보 + 부서 정보 쿼리가 발생

fetch join을 이용한 쿼리 최적화 처리

프로젝트 후반에 fetch join을 하려 했지만 다른 심각한 버그가 발생해 후순위로 밀어 프로젝트 기간 내에 최적화를 하지 못한 아쉬움이 남아 최적화 진행

간단했던 작업이었기에 더 아쉬움이 남음

### ✅ 퇴사처리

퇴사 처리시 직원 부서 null 처리

- 문제점1
    
    퇴사 처리시 직원의 부서 null 처리 → 성공
    
    직원 수정을 누르면 부서 정보가 보이지 않는 현상 발생
    
    POSTMAN으로 GET 요청 시 모든 정보가 잘 뜨는 것을 확인
    
    백엔드에서 보내는 데이터에는 문제가 없고 프론트에서 문제가 있다고 판단
    
    퇴사 처리시 직원의 부서가 null 처리가 되면서 직원이 갖는 부서의 id가 null로 변경 → 프론트에서 Null을 못받게 처리되어 있어 기능이 제대로 작동하지 않는다고 판단
    
    프론트를 수정하는 것이 목적이 아니기 때문에 수정하지 않음, 퇴사 처리시 직원의 부서 null처리 구현 되었고, 큰 오류가 아님으로 더이상 수정하지 않음
    
- 문제점2
    
    직원이 퇴사함에 따라 총 직원 수가 퇴사한 인원만큼 줄어들어야 하는데 Count 부분에서 줄어들지 않는 현상, 분포에서 총 직원수를 퇴사한 인원도 포함시키는 현상이 발생
    
    현재 직원수 계산을 퇴사자는 제외하도록 로직 수정
